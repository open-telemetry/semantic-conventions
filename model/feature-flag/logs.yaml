groups:
  - id: feature_flag.evaluation
    type: event
    name: feature_flag.evaluation
    brief: >
      Defines feature flag evaluation as an event. 
    note: >
      A `feature_flag.evaluation` event SHOULD be emitted whenever a feature flag
      value is evaluated, which may happen many times over the course of an
      application lifecycle.
      For example, a website A/B testing different animations may evaluate a
      flag each time a button is clicked.
      A `feature_flag.evaluation` event is emitted on each evaluation even if the result is the same.
    attributes:
      - ref: feature_flag.key
        requirement_level: required
      - ref: feature_flag.variant
        requirement_level:
          conditionally_required: If feature flag provider supplies a variant or equivalent concept.
      - ref: feature_flag.system
        requirement_level: recommended
      - ref: feature_flag.context.id
        requirement_level: recommended
      - ref: feature_flag.version
        requirement_level: recommended
      - ref: feature_flag.set.id
        requirement_level: recommended
      - ref: feature_flag.evaluation.reason
        requirement_level: recommended
      - ref: feature_flag.evaluation.error.code
        requirement_level:
          conditionally_required: if and only if an error occurred during flag evaluation.
      - ref: feature_flag.evaluation.error.message
        requirement_level:
          recommended: If and only if an error occurred. It's NOT RECOMMENDED to duplicate the value of `feature_flag.evaluation.error.code` in `feature_flag.evaluation.error.message`.
    body:
      id: feature_flag.evaluation
      type: map
      requirement_level: recommended
      fields:
        - id: value
          type: undefined
          stability: experimental
          brief: The evaluated value of the feature flag.
          requirement_level:
            conditionally_required: >
              If and only if feature flag provider does not supply variant or equivalent concept.
              Otherwise, `value` should be treated as opt-in.
          examples: ["#ff0000", "1", "true"]
