groups:
  - id: registry.workflow
    type: attribute_group
    brief: >
      Workflows seek to describe the execution of one ore more tasks to achieve an end result.

      Workflows can be used to describe cicd, deployments, generic jobs or even cron jobs.
    attributes:
      - id: workflow.id
        stability: development
        type: string
        brief: >
          Unique ID for this execution of the workflow and will be shared across all the task runs.
        examples: [ '5c6e9a4b-69ab-499f-b4a7-4cf5c8720d66' ]
      - id: workflow.outcome
        type:
          members:
            - id: success
              value: success
              brief: "The task run finished successfully."
              stability: development
            - id: failure
              value: failure
              brief: >-
                The task run did not finish successfully, eg. due to a compile error or a failing test.
                Such failures are usually detected by non-zero exit codes of the tools executed in the task run.
              stability: development
            - id: error
              value: error
              brief: >-
                The task run failed due to an error in the CICD system, eg. due to the worker being killed.
              stability: development
            - id: timeout
              value: timeout
              brief: "A timeout caused the task run to be interrupted."
              stability: development
            - id: cancellation
              value: cancellation
              brief: "The task run was cancelled, eg. by a user manually cancelling the task run."
              stability: development
            - id: skip
              value: skip
              brief: "The task run was skipped, eg. due to a precondition not being met."
              stability: development
        stability: development
        brief: >
          The result of a task run.
        examples: ["success", "failure", "timeout", "skipped"]
      - id: workflow.state
        type:
          members:
            - id: pending
              value: pending
              brief: >
                The run pending state spans from the event triggering the pipeline run until the execution of the run starts (eg. time spent in a queue, provisioning agents, creating run resources).
              stability: development
            - id: executing
              value: executing
              brief: The executing state spans the execution of any run tasks (eg. build, test).
              stability: development
            - id: finalizing
              value: finalizing
              brief: The finalizing state spans from when the run has finished executing and covers cleanup of resources etc.
              stability: development
            - id: completed
              value: completed
              brief: The completed state spans from when the run has finished finalizing (eg. cleanup of run resources).
              stability: development
        stability: development
        brief: >
          The pipeline run goes through these states during its lifecycle.
        examples: ["pending", "executing", "finalizing"]
      - id: workflow.url.full
        type: string
        stability: development
        brief: >
          The [URL](https://wikipedia.org/wiki/URL) of the pipeline run,
          providing the complete address in order to locate and identify the pipeline run.
        examples:
          [
            "https://github.com/open-telemetry/semantic-conventions/actions/runs/9753949763?pr=1075",
          ]
      - id: workflow.definition.id
        stability: development
        type: string
        brief: >
          Unique ID for this workflow which can be used to correlate multiple executions of this workflow.
        examples: [ '5c6e9a4b-69ab-499f-b4a7-4cf5c8720d66' ]
      - id: workflow.definition.name
        stability: development
        type: string
        brief: >
          Name of the workflow
        examples: [ 'Build and deploy application' ]
      - id: workflow.definition.type
        stability: development
        type: string
        brief: >
          Type of the workflow
        examples: [ 'DSL' ]
      - id: workflow.definition.url.full
        type: string
        stability: development
        brief: >
          The [URL](https://wikipedia.org/wiki/URL) of the workflow,
          providing the complete address in order to locate and identify the workflow.
        examples:
          [
            "https://github.com/open-telemetry/semantic-conventions/actions/runs/9753949763?pr=1075",
          ]
      - id: workflow.definition.version
        stability: development
        type: string
        brief: >
          Version of the workflow
        examples: [ '2.1' ]
      - id: workflow.execution.id
        stability: development
        type: string
        brief: >
          Unique ID for this execution of the workflow and will be shared across all the task runs.
        examples: [ '5c6e9a4b-69ab-499f-b4a7-4cf5c8720d66' ]
      - id: workflow.iteration.annotation
        type: template[string]
        stability: development
        brief: >
          The annotation key-value pairs placed on the iteration.
        note: |
          The `<key>` being the annotation name, the value being the annotation value, even if the value is empty.
        examples: [ 'workflow.iteration.annotation.id=1' ]
      - id: workflow.iteration.count
        stability: development
        type: int
        brief: >
          The index of the item which is being processed by the task.
        note: >
          Only used when the task is operating on batches.
        examples: [ 0 ]
      - id: workflow.iteration.limit
        stability: development
        type: int
        brief: >
          This can be a pre-defined limit of times the task can be run or it can be the batch size.
        note: >
          Only used when the task is operating on batches or within a loop.
        examples: [ 10 ]
      - id: workflow.iteration.success
        stability: development
        type: int
        brief: >
          The number items that were processed by this task.
        examples: [ 7 ]
      - id: workflow.iteration.failed
        stability: development
        type: int
        brief: >
          The number items that were processed by this task.
        examples: [ 1 ]
      - id: workflow.iteration.skipped
        stability: development
        type: int
        brief: >
          The number items that were processed by this task.
        examples: [ 2 ]
      - id: workflow.execution.attempt
        stability: development
        type: int
        brief: >
          What number execution attempt is this.
        note: >
          This counter starts at 1 and is incremented on each re-run of the task.
          The uniqueness is based upon `workflow.execution.id` & `workflow.execution.item.id`.
        examples: [ 1 ]
      - id: workflow.execution.outcome
        type:
          members:
            - id: success
              value: success
              brief: "The execution finished successfully."
              stability: development
            - id: failure
              value: failure
              brief: The execution failed as a non-zero exit codes was returned.
              stability: development
            - id: error
              value: error
              brief: During the execution an error with the worker occurred, ie worker being killed.
              stability: development
            - id: timeout
              value: timeout
              brief: "The execution timed-out causing the execution to be interrupted."
              stability: development
            - id: cancellation
              value: cancellation
              brief: "The execution was cancelled, eg. by a user manually cancelling the execution."
              stability: development
            - id: skip
              value: skip
              brief: "The execution was skipped, eg. due to a precondition not being met."
              stability: development
        stability: development
        brief: The outcome of executing the task.
        examples: ["success", "failure", "timeout", "skipped"]
      - id: workflow.execution.state
        type:
          members:
            - id: pending
              value: pending
              brief: >
                The run pending state spans from the event triggering the pipeline run until the execution of the run starts (eg. time spent in a queue, provisioning agents, creating run resources).
              stability: development
            - id: executing
              value: executing
              brief: The executing state spans the execution of any run tasks (eg. build, test).
              stability: development
            - id: finalizing
              value: finalizing
              brief: The finalizing state spans from when the run has finished executing and covers cleanup of resources etc.
              stability: development
            - id: completed
              value: completed
              brief: The completed state spans from when the run has finished finalizing (eg. cleanup of run resources).
              stability: development
        stability: development
        brief: >
          The pipeline run goes through these states during its lifecycle.
        examples: ["pending", "executing", "finalizing"]
      - id: workflow.execution.url.full
        type: string
        stability: development
        brief: >
          The [URL](https://wikipedia.org/wiki/URL) of the pipeline run,
          providing the complete address in order to locate and identify the pipeline run.
        examples:
          [
            "https://github.com/open-telemetry/semantic-conventions/actions/runs/9753949763?pr=1075",
          ]
      - id: workflow.platform.name
        stability: development
        type:
          members:
            - id: 'hangfire'
              stability: development
              value: 'hangfire'
              brief: 'Hangfire'
            - id: 'k8s'
              stability: development
              value: 'k8s'
              brief: 'Kubernetes'
            - id: 'quartz'
              stability: development
              value: 'quartz'
              brief: 'Quartz'
        brief: >
          The product being used to co-ordinate the execution of the tasks.
      - id: workflow.task.id
        stability: development
        type: string
        brief: >
          Unique ID for this task which can be used to correlate multiple executions of this task.
        examples: [ '5c6e9a4b-69ab-499f-b4a7-4cf5c8720d66' ]
      - id: workflow.task.annotation
        type: template[string]
        stability: development
        brief: >
          The annotation key-value pairs placed on the task.
        note: |
          The `<key>` being the annotation name, the value being the annotation value, even if the value is empty.
        examples: [ 'workflow.task.annotation.replicas=1', 'k8s.task.annotation.data=' ]
      - id: workflow.task.name
        stability: development
        type: string
        brief: >
          Name of the task
        examples: [ 'Build application' ]
      - id: workflow.task.version
        stability: development
        type: string
        brief: >
          Version of the task
        examples: [ '2.1' ]
      - id: workflow.trigger.id
        stability: development
        type: string
        brief: >
          Unique ID for this trigger which can be used to correlate trigger usage
        examples: [ '5c6e9a4b-69ab-499f-b4a7-4cf5c8720d66' ]
      - id: workflow.trigger.name
        stability: development
        type: string
        brief: >
          Name of the trigger
        examples: [ 'Nightly build' ]
      - id: workflow.trigger.outcome
        type:
          members:
            - id: success
              value: success
              brief: "The task run finished successfully."
              stability: development
            - id: failure
              value: failure
              brief: >-
                The task run did not finish successfully, eg. due to a compile error or a failing test.
                Such failures are usually detected by non-zero exit codes of the tools executed in the task run.
              stability: development
            - id: error
              value: error
              brief: >-
                The task run failed due to an error in the CICD system, eg. due to the worker being killed.
              stability: development
            - id: timeout
              value: timeout
              brief: "A timeout caused the task run to be interrupted."
              stability: development
            - id: cancellation
              value: cancellation
              brief: "The task run was cancelled, eg. by a user manually cancelling the task run."
              stability: development
            - id: skip
              value: skip
              brief: "The task run was skipped, eg. due to a precondition not being met."
              stability: development
        stability: development
        brief: >
          The result of a task run.
        examples: ["success", "failure", "timeout", "skipped"]
      - id: workflow.trigger.schedule
        type: string
        stability: development
        brief: >
          A string containing the schedule period as
          [Cron Expression](https://docs.oracle.com/cd/E12058_01/doc/doc.1014/e12030/cron_expressions.htm).
        examples: "0/5 * * * ? *"
      - id: workflow.trigger.type
        stability: development
        type: string
        brief: >
          Type of trigger that was called
        examples: [ 'cron' ]
