groups:
  - id: attribute.event.workflow.run
    type: attribute_group
    brief: >
    note: >
    attributes:
      - ref: workflow.definition.id
      - ref: workflow.definition.name
      - ref: workflow.definition.url.full
      - ref: workflow.id
        requirement_level: required
      - ref: workflow.url.full
      - ref: workflow.platform.name
        requirement_level: required
      - ref: workflow.trigger.type
  - id: attribute.event.workflow.execution
    type: attribute_group
    extends: attribute.event.workflow.run
    brief: >
    note: >
    attributes:
      - ref: workflow.execution.id
        requirement_level: required
      - ref: workflow.execution.url.full
      - ref: workflow.task.id
        requirement_level: required
      - ref: workflow.task.name
        requirement_level: recommended
  - id: attribute.metric.workflow.run
    type: attribute_group
    brief: >
    note: >
    attributes:
      - ref: container.name
        requirement_level: opt_in
      - ref: host.name
        requirement_level: recommended
      - ref: workflow.definition.name
        requirement_level: required
      - ref: workflow.platform.name
      - ref: workflow.trigger.type
        requirement_level: required
      - ref: error.type
        requirement_level:
          conditionally_required: If and only if the workflow execution failed.
  - id: attribute.metric.workflow.execution
    type: attribute_group
    brief: >
    note: >
    attributes:
      - ref: container.name
        requirement_level: opt_in
      - ref: host.name
        requirement_level: recommended
      - ref: workflow.task.name
        requirement_level: required
      - ref: workflow.platform.name
      - ref: error.type
        requirement_level:
          conditionally_required: If and only if the task run failed.
  - id: attribute.span.workflow.core
    type: attribute_group
    brief: >
        Defines minimal set of attributes used by k8s jobs
    attributes:
      - ref: workflow.id
        requirement_level: required
      - ref: workflow.platform.name
        requirement_level: required
  - id: attribute.span.workflow.coordination
    type: attribute_group
    extends: attribute.span.workflow.core
    brief: >
        Defines minimal set of attributes used by k8s jobs
    attributes:
      - ref: workflow.task.id
        requirement_level: required
      - ref: workflow.task.name
        requirement_level: opt_in
      - ref: workflow.execution.attempt
        requirement_level: opt_in
  - id: attribute.span.workflow.execution
    type: attribute_group
    extends: attribute.span.workflow.coordination
    brief: >
        Defines minimal set of attributes used by k8s jobs
    attributes:
      - ref: workflow.id
        requirement_level: recommended
      - ref: workflow.execution.id
        requirement_level: required
      - ref: workflow.execution.url.full
        requirement_level: recommended
      - ref: workflow.task.name
        requirement_level: recommended
      - ref: workflow.iteration.annotation
        requirement_level: opt_in
