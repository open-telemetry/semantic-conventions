groups:
  - id: event.gen_ai.client.inference.operation.details
    name: gen_ai.client.inference.operation.details
    type: event
    stability: development
    brief: >
      Describes the details of a GenAI completion request including chat history
      and parameters.
    note: >
      This event is opt-in and could be used to store input and output details
      independently from traces.
    extends: attributes.gen_ai.inference.client

  - id: event.gen_ai.evaluation.result
    name: gen_ai.evaluation.result
    type: event
    stability: development
    brief: >
      This event captures the result of evaluating GenAI output for quality, accuracy, or other characteristics.
      This event SHOULD be parented to GenAI operation span being evaluated when possible
      or set `gen_ai.response.id` when span id is not available.
    attributes:
      - ref: gen_ai.evaluation.name
        requirement_level: required
      - ref: gen_ai.evaluation.score.value
        requirement_level:
          conditionally_required: if applicable
      - ref: gen_ai.evaluation.score.label
        requirement_level:
          conditionally_required: if applicable
      - ref: gen_ai.evaluation.explanation
        requirement_level: recommended
      - ref: gen_ai.response.id
        requirement_level:
          recommended: when available
        note: |
          The unique identifier assigned to the specific
          completion being evaluated. This attribute helps correlate the evaluation
          event with the corresponding operation when span id is not available.
      - ref: error.type
        requirement_level:
          conditionally_required: "if the operation ended in an error"
        note: |
          The `error.type` SHOULD match the error code returned by the Generative AI Evaluation provider or the client library,
          the canonical name of exception that occurred, or another low-cardinality error identifier.
          Instrumentations SHOULD document the list of errors they report.

  - id: event.gen_ai.client.operation.exception
    name: gen_ai.client.operation.exception
    stability: development
    type: event
    brief: >
      This event represents an exception that occurred during a Generative AI client operation,
      such as API errors, rate limiting, model errors, timeouts, or other errors that prevent
      the operation from completing successfully.
    note: >
      This event SHOULD be recorded when an exception occurs during Generative AI client operations.

      Instrumentations SHOULD set the severity to WARN (severity number 13) when recording this event.

      Instrumentations MAY provide a configuration option to populate exception events
      with the attributes captured on the corresponding Generative AI client span.
    attributes:
      - ref: exception.type
        requirement_level:
          conditionally_required: Required if `exception.message` is not set, recommended otherwise.
      - ref: exception.message
        requirement_level:
          conditionally_required: Required if `exception.type` is not set, recommended otherwise.
      - ref: exception.stacktrace

  - id: event.gen_ai.server.operation.exception
    name: gen_ai.server.operation.exception
    stability: development
    type: event
    brief: >
      This event represents an exception that occurred during Generative AI server-side
      processing, such as model inference failures, internal errors, or other exceptions
      that prevent the server from successfully handling the request.
    note: >
      This event SHOULD be recorded when an exception occurs during Generative AI server-side processing.

      Instrumentations SHOULD set the severity to ERROR (severity number 17) when recording this event.

      Instrumentations MAY provide a configuration option to populate exception events
      with the attributes captured on the corresponding Generative AI server span.
    attributes:
      - ref: exception.type
        requirement_level:
          conditionally_required: Required if `exception.message` is not set, recommended otherwise.
      - ref: exception.message
        requirement_level:
          conditionally_required: Required if `exception.type` is not set, recommended otherwise.
      - ref: exception.stacktrace
