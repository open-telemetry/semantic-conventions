groups:
  - id: event.gen_ai.client.inference.operation.details
    name: gen_ai.client.inference.operation.details
    type: event
    stability: development
    brief: >
      Describes the details of a GenAI completion request including chat history
      and parameters.
    note: >
      This event is opt-in and could be used to store input and output details
      independently from traces.
    extends: attributes.gen_ai.inference.client

  - id: event.gen_ai.evaluation.result
    name: gen_ai.evaluation.result
    type: event
    stability: development
    brief: >
      This event captures the result of evaluating GenAI output for quality, accuracy, or other characteristics.
      This event SHOULD be parented to GenAI operation span being evaluated when possible
      or set `gen_ai.response.id` when span id is not available.
    attributes:
      - ref: gen_ai.evaluation.name
        requirement_level: required
      - ref: gen_ai.evaluation.score.value
        requirement_level:
          conditionally_required: if applicable
      - ref: gen_ai.evaluation.score.label
        requirement_level:
          conditionally_required: if applicable
      - ref: gen_ai.evaluation.explanation
        requirement_level: recommended
      - ref: gen_ai.response.id
        requirement_level:
          recommended: when available
        note: |
          The unique identifier assigned to the specific
          completion being evaluated. This attribute helps correlate the evaluation
          event with the corresponding operation when span id is not available.
      - ref: error.type
        requirement_level:
          conditionally_required: "if the operation ended in an error"
        note: |
          The `error.type` SHOULD match the error code returned by the Generative AI Evaluation provider or the client library,
          the canonical name of exception that occurred, or another low-cardinality error identifier.
          Instrumentations SHOULD document the list of errors they report.

  - id: event.gen_ai.security.finding
    name: gen_ai.security.finding
    type: event
    stability: development
    brief: >
      Reports a specific security finding detected during guardian evaluation.
    note: |
      Multiple findings MAY be emitted for a single guardian span.

      Events SHOULD be parented to the `span.gen_ai.apply_guardrail.internal` span when possible.
    attributes:
      - ref: gen_ai.security.risk.category
        requirement_level: required
      - ref: gen_ai.security.risk.severity
        requirement_level: required
      - ref: gen_ai.security.risk.score
        requirement_level: recommended
      - ref: gen_ai.security.risk.metadata
        requirement_level: recommended
      - ref: gen_ai.security.policy.id
        requirement_level:
          conditionally_required: if triggered by a specific policy
      - ref: gen_ai.security.policy.name
        requirement_level: recommended
      - ref: gen_ai.security.policy.version
        requirement_level: recommended
