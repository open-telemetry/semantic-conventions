groups:
  - id: attributes.metrics.rpc.client
    type: attribute_group
    brief: "Describes RPC metric attributes."
    extends: common.rpc.attributes
    attributes:
      - ref: rpc.system.name
        requirement_level: required
      - ref: server.address
      - ref: server.port
      - ref: rpc.method
        requirement_level:
          conditionally_required: if available.

  - id: attributes.metrics.rpc.server
    type: attribute_group
    brief: "Describes RPC metric attributes."
    extends: attributes.metrics.rpc.client
    attributes:
      - ref: rpc.system.name
        requirement_level: required
      - ref: server.address
        note: ""
        requirement_level: opt_in
      - ref: server.port
        note: ""
        requirement_level: opt_in
      - ref: rpc.method
        requirement_level:
          conditionally_required: if available.

  # RPC Server metrics
  - id: metric.rpc.server.call.duration
    type: metric
    metric_name: rpc.server.call.duration
    annotations:
      code_generation:
        metric_value_type: double
    stability: development
    brief: Measures the duration of inbound remote procedure calls (RPC).
    instrument: histogram
    unit: "s"
    note: |
      When this metric is reported alongside an RPC server span, the metric value
      SHOULD be the same as the RPC server span duration.

    extends: attributes.metrics.rpc.server

  # RPC Client metrics
  - id: metric.rpc.client.call.duration
    type: metric
    metric_name: rpc.client.call.duration
    annotations:
      code_generation:
        metric_value_type: double
    stability: development
    brief: Measures the duration of outbound remote procedure calls (RPC).
    instrument: histogram
    unit: "s"
    note: |
      When this metric is reported alongside an RPC client span, the metric value
      SHOULD be the same as the RPC client span duration.
    extends: attributes.metrics.rpc.client
