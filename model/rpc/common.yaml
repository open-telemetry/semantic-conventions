groups:
  - id: common.rpc.attributes
    type: attribute_group
    brief: 'Common attributes for RPC spans and metrics.'
    attributes:
      - ref: rpc.method
      - ref: server.address
        brief: >
          A string identifying a group of RPC server instances request is sent to.
        note: >
          May contain a DNS name, an endpoint and path in the service registry,
          local socket name or an IP address.

          Semantic conventions for individual RPC systems SHOULD document how to
          populate this attribute.

          When address is an IP address, instrumentations SHOULD NOT do a reverse
          DNS lookup to obtain a DNS name and SHOULD set `server.address` to the
          provided IP address.
        requirement_level:
          conditionally_required: If available.
      - ref: server.port
        requirement_level:
          conditionally_required: if applicable and if `server.address` is set.
      - ref: rpc.response.status_code
        requirement_level:
          conditionally_required: if available.
      - ref: error.type
        requirement_level:
          conditionally_required: If and only if the operation failed.
        examples: ['DEADLINE_EXCEEDED', 'java.net.UnknownHostException', '-32602']
        note: |
          If the RPC fails with an error before status code is returned,
          `error.type` SHOULD be set to the exception type (its fully-qualified class name, if applicable)
          or a component-specific, low cardinality error identifier.

          If a response status code is returned and status indicates an error,
          `error.type` SHOULD be set to that status code. Check system-specific conventions
          for the details on which values of `rpc.response.status_code` are considered errors.

          The `error.type` value SHOULD be predictable and SHOULD have low cardinality.
          Instrumentations SHOULD document the list of errors they report.

          If the request has completed successfully, instrumentations SHOULD NOT set
          `error.type`.
