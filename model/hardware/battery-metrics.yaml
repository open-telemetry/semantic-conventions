groups:
  # BATTERY METRICS
  - id: metric.hw.battery
    type: attribute_group
    brief: >
      Common attributes for battery metrics
    extends: hardware.attributes.common
    attributes:
      - ref: hw.battery.chemistry
        requirement_level: recommended
      - ref: hw.battery.capacity
        requirement_level: recommended
      - ref: hw.battery.model
        requirement_level: recommended
      - ref: hw.battery.vendor
        requirement_level: recommended

  - id: metric.hw.battery.charge
    type: metric
    metric_name: hw.battery.charge
#    value_type: double
    stability: development
    brief: "Remaining fraction of battery charge"
    instrument: gauge
    unit: "1"
    extends: metric.hw.battery

    #TODO: decide on metric name - charge.limit is original
  - id: metric.hw.battery.charge.limit
    type: metric
    metric_name: hw.battery.charge.limit
#    value_type: double
    stability: development
    brief: "Lower limit of battery charge fraction to ensure proper operation"
    instrument: gauge
    unit: "1"
    extends: metric.hw.battery
    attributes:
      - ref: hw.limit_type
        examples: ["critical", "throttled", "degraded"]
        requirement_level: recommended

  - id: metric.hw.battery.time_left
    type: metric
    metric_name: hw.battery.time_left
#    value_type: int
    stability: development
    brief: "Time left before battery is completely charged or discharged"
    instrument: gauge
    unit: "s"
    extends: metric.hw.battery
    attributes:
      - ref: hw.state
        requirement_level:
          conditionally_required: If the battery is charging or discharging
        note: >
          The `hw.state` attribute should indicate the current state of the battery.
          It should be one of the predefined states such as "charging" or "discharging".
